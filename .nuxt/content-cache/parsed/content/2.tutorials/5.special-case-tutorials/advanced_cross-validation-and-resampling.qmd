{"parsed":{"_path":"/tutorials/special-case-tutorials/advanced_cross-validation-and-resampling","_dir":"special-case-tutorials","_draft":false,"_partial":false,"_locale":"","title":"Cross-Validation and Resampling for Longitudinal Models","description":"","body":{"type":"root","children":[{"type":"element","tag":"h3","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cross-validation is an essential technique for evaluating the performance of statistical models, especially when working with complex longitudinal data. It allows you to assess how well a model generalizes to new data by partitioning the dataset into training and testing sets. In longitudinal studies, special care must be taken to preserve the temporal structure of the data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This tutorial will guide you through the basics of cross-validation and resampling techniques, with a focus on applying them in longitudinal data analysis."}]},{"type":"element","tag":"h3","props":{"id":"why-cross-validation"},"children":[{"type":"text","value":"Why Cross-Validation?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In longitudinal data, the goal is not just to fit a model to the data but also to assess how well it can predict future observations. Cross-validation helps ensure that your model is not overfitting to the training data, providing a more realistic assessment of its predictive performance."}]},{"type":"element","tag":"h3","props":{"id":"common-cross-validation-techniques"},"children":[{"type":"text","value":"Common Cross-Validation Techniques"}]},{"type":"element","tag":"h4","props":{"id":"_1-k-fold-cross-validation"},"children":[{"type":"text","value":"1. "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"K-Fold Cross-Validation"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This method splits the data into K equal-sized folds. The model is trained on K-1 folds and tested on the remaining fold. This process is repeated K times, with a different fold serving as the test set each time."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Example of K-Fold Cross-Validation\nlibrary(caret)\n\n# Example dataset\nset.seed(123)\ndata <- data.frame(id = rep(1:100, each = 5), time = rep(1:5, 100), response = rnorm(500))\n\n# Train a model using 5-fold cross-validation\ntrain_control <- trainControl(method = \"cv\", number = 5)\nmodel <- train(response ~ time, data = data, method = \"lm\", trControl = train_control)\n\n# Print results\nprint(model)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Example of K-Fold Cross-Validation\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"library(caret)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Example dataset\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"set.seed(123)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"data <- data.frame(id = rep(1:100, each = 5), time = rep(1:5, 100), response = rnorm(500))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Train a model using 5-fold cross-validation\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"train_control <- trainControl(method = \"cv\", number = 5)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"model <- train(response ~ time, data = data, method = \"lm\", trControl = train_control)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Print results\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(model)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"_2-leave-one-out-cross-validation-loocv"},"children":[{"type":"text","value":"2. "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Leave-One-Out Cross-Validation (LOOCV)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"LOOCV is an extreme case of K-fold cross-validation where K equals the number of observations. Each observation is left out one at a time, and the model is trained on the remaining data."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Leave-One-Out Cross-Validation\ntrain_control_loocv <- trainControl(method = \"LOOCV\")\nmodel_loocv <- train(response ~ time, data = data, method = \"lm\", trControl = train_control_loocv)\n\n# Print LOOCV results\nprint(model_loocv)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Leave-One-Out Cross-Validation\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"train_control_loocv <- trainControl(method = \"LOOCV\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"model_loocv <- train(response ~ time, data = data, method = \"lm\", trControl = train_control_loocv)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Print LOOCV results\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(model_loocv)\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"cross-validation-for-longitudinal-data"},"children":[{"type":"text","value":"Cross-Validation for Longitudinal Data"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In longitudinal data, it's essential to respect the temporal ordering of the data when splitting it into training and testing sets. One common approach is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"blocked cross-validation"}]},{"type":"text","value":", where time blocks are used to ensure that future observations are not used to predict past ones."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Time-based cross-validation example\ntrain_control_time <- trainControl(method = \"timeslice\", initialWindow = 3, horizon = 1, fixedWindow = TRUE)\nmodel_time_cv <- train(response ~ time, data = data, method = \"lm\", trControl = train_control_time)\n\n# Print time-slice cross-validation results\nprint(model_time_cv)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Time-based cross-validation example\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"train_control_time <- trainControl(method = \"timeslice\", initialWindow = 3, horizon = 1, fixedWindow = TRUE)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"model_time_cv <- train(response ~ time, data = data, method = \"lm\", trControl = train_control_time)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Print time-slice cross-validation results\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"print(model_time_cv)\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Cross-validation is a powerful technique for evaluating the generalizability of your models. In longitudinal data analysis, it’s important to choose the right method of cross-validation that respects the time-dependent structure of your data. With practice, you'll find that cross-validation not only improves your model performance but also boosts your confidence in the results."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Stay encouraged! It can be tricky at first, but the more you apply these techniques, the more insights you’ll gain from your longitudinal data models."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":3,"text":"Introduction"},{"id":"why-cross-validation","depth":3,"text":"Why Cross-Validation?"},{"id":"common-cross-validation-techniques","depth":3,"text":"Common Cross-Validation Techniques"},{"id":"cross-validation-for-longitudinal-data","depth":3,"text":"Cross-Validation for Longitudinal Data"},{"id":"conclusion","depth":3,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:2.tutorials:5.special-case-tutorials:advanced_cross-validation-and-resampling.qmd","_source":"content","_file":"2.tutorials/5.special-case-tutorials/advanced_cross-validation-and-resampling.qmd","_extension":"qmd"},"hash":"cc2kqCIbF3"}