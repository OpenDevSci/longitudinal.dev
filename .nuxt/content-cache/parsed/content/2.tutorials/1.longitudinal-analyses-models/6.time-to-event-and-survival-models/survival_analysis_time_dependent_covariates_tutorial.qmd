{"parsed":{"_path":"/tutorials/longitudinal-analyses-models/time-to-event-and-survival-models/survival_analysis_time_dependent_covariates_tutorial","_dir":"time-to-event-and-survival-models","_draft":false,"_partial":false,"_locale":"","title":"Survival Analysis with Time-Dependent Covariates","description":"","author":"Your Name","format":{"html":{"code-tools":true,"toc":true,"toc-depth":3,"code-link":true,"df-print":"paged"}},"body":{"type":"root","children":[{"type":"element","tag":"h3","props":{"id":"Ô∏è-foundations"},"children":[{"type":"text","value":"üèóÔ∏è Foundations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Survival Analysis with time-dependent covariates is a statistical approach used to model time-to-event data where explanatory variables (covariates) can change over the observation period. Traditional survival analysis methods, like the Cox proportional hazards model, often assume that covariates are fixed throughout the study. However, in many real-world situations, covariates may vary with time, influencing the hazard function at different moments. Incorporating time-dependent covariates allows for a more accurate and dynamic modeling of the hazard rate, capturing the effects of variables whose values change over time."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this framework, covariates are classified as either internal or external time-dependent covariates. Internal covariates are functions of the survival process itself (e.g., biomarkers measured repeatedly), while external covariates are independent of the survival process (e.g., changing environmental factors). The inclusion of time-dependent covariates in survival models enables researchers to assess how changes in covariates affect the risk of event occurrence at specific times, providing deeper insights into the temporal dynamics of the factors influencing survival."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Survival Analysis with time-dependent covariates is particularly useful in medical research, epidemiology, and social sciences, where understanding the impact of evolving factors on the timing of events is crucial. By extending traditional survival models to account for covariate changes over time, this approach enhances the ability to make more precise predictions and to identify critical periods when interventions may be most effective. It allows for a nuanced analysis of complex longitudinal data, facilitating a better understanding of the relationships between time-varying factors and event risks."}]},{"type":"element","tag":"div","props":{"className":["when-to-use-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"when-to-use-survival-analysis-with-time-dependent-covariates"},"children":[{"type":"text","value":"ü§î When to Use Survival Analysis with Time-Dependent Covariates?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use this type of analysis when:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You have time-to-event data, and you want to model when an event happens."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"One or more of your covariates change over time, such as blood pressure or medication status."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You need to account for how changing covariates influence the hazard rate over time."}]}]}]},{"type":"element","tag":"div","props":{"className":["getting-started-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"getting-started-with-survival-analysis-and-time-dependent-covariates"},"children":[{"type":"text","value":"üöÄ Getting Started with Survival Analysis and Time-Dependent Covariates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this tutorial, we will:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Review how to fit a survival model with time-dependent covariates using R."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use a dataset with repeated measurements for a covariate to demonstrate how time-dependent variables are incorporated into survival models."}]}]}]},{"type":"element","tag":"div","props":{"className":["hands-on-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"hands-on-example"},"children":[{"type":"text","value":"üë©‚Äçüíª Hands-On Example"}]},{"type":"element","tag":"h4","props":{"id":"dataset"},"children":[{"type":"text","value":"Dataset"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will create a dataset where we measure the time until an event (e.g., patient death), along with a time-dependent covariate (e.g., blood pressure). The dataset includes:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"SubjectID"}]},{"type":"text","value":": A unique identifier for each subject."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"StartTime"}]},{"type":"text","value":": The start of each interval."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"StopTime"}]},{"type":"text","value":": The end of each interval."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Event"}]},{"type":"text","value":": Whether the event occurred at the stop time (1 = event, 0 = censored)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"TimeDependentCov"}]},{"type":"text","value":": A time-dependent covariate (e.g., blood pressure) measured at each time interval."}]}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Generate a simple dataset\nset.seed(123)\ndata <- data.frame(\n  SubjectID = rep(1:10, each = 4),\n  StartTime = rep(seq(0, 9, by = 3), times = 10),\n  StopTime = rep(seq(3, 12, by = 3), times = 10),\n  Event = rbinom(40, 1, 0.3),\n  TimeDependentCov = rnorm(40, mean = 120, sd = 10)\n)\n\n# View the first few rows\nhead(data)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Generate a simple dataset\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"set.seed(123)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"data <- data.frame(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  SubjectID = rep(1:10, each = 4),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  StartTime = rep(seq(0, 9, by = 3), times = 10),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  StopTime = rep(seq(3, 12, by = 3), times = 10),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Event = rbinom(40, 1, 0.3),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  TimeDependentCov = rnorm(40, mean = 120, sd = 10)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# View the first few rows\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"head(data)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"fitting-a-cox-proportional-hazards-model-with-time-dependent-covariates"},"children":[{"type":"text","value":"Fitting a Cox Proportional Hazards Model with Time-Dependent Covariates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"survival"}]},{"type":"text","value":" package in R to fit a Cox Proportional Hazards Model that includes time-dependent covariates."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Install and load necessary library\nif (!require(survival)) install.packages(\"survival\")\nlibrary(survival)\n\n# Fit a Cox model with time-dependent covariates\ncox_model <- coxph(Surv(StartTime, StopTime, Event) ~ TimeDependentCov + cluster(SubjectID), data = data)\n\n# Display the model summary\nsummary(cox_model)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Install and load necessary library\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (!require(survival)) install.packages(\"survival\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"library(survival)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Fit a Cox model with time-dependent covariates\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"cox_model <- coxph(Surv(StartTime, StopTime, Event) ~ TimeDependentCov + cluster(SubjectID), data = data)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Display the model summary\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"summary(cox_model)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"model-interpretation"},"children":[{"type":"text","value":"Model Interpretation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The results of the Cox model with time-dependent covariates provide estimates of how the hazard of the event changes as the covariate changes over time. For example, a positive coefficient for the time-dependent covariate indicates that higher values of the covariate are associated with an increased hazard of the event occurring."}]},{"type":"element","tag":"h4","props":{"id":"visualizing-the-results"},"children":[{"type":"text","value":"Visualizing the Results"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can visualize the effect of the time-dependent covariate on the hazard rate using Kaplan-Meier curves or predicted survival curves."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Fit a Kaplan-Meier survival curve for visualization\nkm_fit <- survfit(Surv(StartTime, StopTime, Event) ~ TimeDependentCov, data = data)\n\n# Plot the survival curve\nplot(km_fit, xlab = \"Time\", ylab = \"Survival Probability\", main = \"Kaplan-Meier Survival Curve\")\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Fit a Kaplan-Meier survival curve for visualization\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"km_fit <- survfit(Surv(StartTime, StopTime, Event) ~ TimeDependentCov, data = data)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Plot the survival curve\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"plot(km_fit, xlab = \"Time\", ylab = \"Survival Probability\", main = \"Kaplan-Meier Survival Curve\")\n"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"exercises"},"children":[{"type":"text","value":"üõù Exercises"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Try experimenting with different types of time-dependent covariates, or add more time points to see how the hazard changes with time-varying predictors."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"final-thoughts"},"children":[{"type":"text","value":"üí≠ Final Thoughts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You‚Äôve learned how to incorporate time-dependent covariates into survival analysis, offering a dynamic way to assess how changing predictors influence the risk of an event over time. Survival analysis with time-dependent covariates is an essential tool when covariates do not remain constant throughout the study."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"further-resources-for-learning-about-survival-analysis-with-time-dependent-covariates"},"children":[{"type":"text","value":"üîó Further Resources for Learning About Survival Analysis with Time-Dependent Covariates"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Books"}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"\"Survival Analysis: Techniques for Censored and Truncated Data\""}]},{"type":"text","value":" by Klein & Moeschberger: A comprehensive guide to survival analysis, including time-dependent covariates."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"\"Applied Survival Analysis\""}]},{"type":"text","value":" by Hosmer, Lemeshow, and May: A practical guide for using survival analysis in research."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Online Tutorials"}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stats.oarc.ucla.edu/r/survival-analysis-time-dependent/","rel":["nofollow"]},"children":[{"type":"text","value":"Survival Analysis with Time-Dependent Covariates in R by IDRE at UCLA"}]},{"type":"text","value":": A detailed guide on how to fit survival models with time-dependent covariates in R."}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"Ô∏è-foundations","depth":3,"text":"üèóÔ∏è Foundations"},{"id":"when-to-use-survival-analysis-with-time-dependent-covariates","depth":3,"text":"ü§î When to Use Survival Analysis with Time-Dependent Covariates?"},{"id":"getting-started-with-survival-analysis-and-time-dependent-covariates","depth":3,"text":"üöÄ Getting Started with Survival Analysis and Time-Dependent Covariates"},{"id":"hands-on-example","depth":3,"text":"üë©‚Äçüíª Hands-On Example"},{"id":"exercises","depth":3,"text":"üõù Exercises"},{"id":"final-thoughts","depth":3,"text":"üí≠ Final Thoughts"},{"id":"further-resources-for-learning-about-survival-analysis-with-time-dependent-covariates","depth":3,"text":"üîó Further Resources for Learning About Survival Analysis with Time-Dependent Covariates"}]}},"_type":"markdown","_id":"content:2.tutorials:1.longitudinal-analyses-models:6.time-to-event-and-survival-models:survival_analysis_time_dependent_covariates_tutorial.qmd","_source":"content","_file":"2.tutorials/1.longitudinal-analyses-models/6.time-to-event-and-survival-models/survival_analysis_time_dependent_covariates_tutorial.qmd","_extension":"qmd"},"hash":"a3Fb1CmFlA"}