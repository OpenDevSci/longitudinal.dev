{"parsed":{"_path":"/tutorials/longitudinal-analyses-models/mixed-effects-and-multilevel/hierarchical_linear_modeling_tutorial","_dir":"mixed-effects-and-multilevel","_draft":false,"_partial":false,"_locale":"","title":"Hierarchical Linear Modeling (HLM)","description":"","author":"Your Name","format":{"html":{"code-tools":true,"toc":true,"toc-depth":3,"code-link":true,"df-print":"paged"}},"body":{"type":"root","children":[{"type":"element","tag":"h3","props":{"id":"Ô∏è-foundations"},"children":[{"type":"text","value":"üèóÔ∏è Foundations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hierarchical Linear Modeling (HLM), also known as multilevel modeling or mixed-effects modeling, is a statistical technique used to analyze data that have a nested or hierarchical structure. In many research contexts, data are collected at multiple levels‚Äîfor example, students nested within classrooms, employees within organizations, or repeated measurements within individuals over time. Traditional linear regression methods may not adequately account for the interdependencies among observations within these nested structures, potentially leading to biased estimates and incorrect inferences."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HLM addresses this issue by allowing for the simultaneous examination of relationships at different levels of analysis. It does this by specifying models that include both fixed effects, which are consistent across units, and random effects, which vary at one or more levels of the hierarchy. For instance, an HLM can model how individual-level predictors influence outcomes while also accounting for group-level influences, such as classroom characteristics affecting student performance. This approach enables researchers to partition the variance in the outcome variable into components attributable to different levels, providing a more accurate and nuanced understanding of the data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By incorporating random effects, HLM can model variability both within and between groups, offering insights into how context influences individual outcomes. The flexibility of HLM makes it suitable for a wide range of applications, including longitudinal studies where measurements are nested within individuals over time. Overall, Hierarchical Linear Modeling provides a robust framework for analyzing complex data structures, enhancing the ability to draw meaningful conclusions from nested or clustered data."}]},{"type":"element","tag":"div","props":{"className":["when-to-use-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"when-to-use-hierarchical-linear-modeling"},"children":[{"type":"text","value":"ü§î When to Use Hierarchical Linear Modeling?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HLM is ideal when:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You have nested data, such as students within schools or patients within hospitals."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You want to model both individual- and group-level effects simultaneously."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You need to account for the non-independence of observations within groups."}]}]}]},{"type":"element","tag":"div","props":{"className":["getting-started-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"getting-started-with-hierarchical-linear-modeling"},"children":[{"type":"text","value":"üöÄ Getting Started with Hierarchical Linear Modeling"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this tutorial, we will walk through a simple example of fitting a hierarchical linear model in R. By the end of this tutorial, you will:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Understand the concept behind HLM."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Fit a two-level hierarchical model using R."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Interpret the results, including fixed and random effects."}]}]}]},{"type":"element","tag":"div","props":{"className":["hands-on-section"]},"children":[{"type":"element","tag":"h3","props":{"id":"hands-on-example"},"children":[{"type":"text","value":"üë©‚Äçüíª Hands-On Example"}]},{"type":"element","tag":"h4","props":{"id":"dataset"},"children":[{"type":"text","value":"Dataset"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will create a simple dataset where students (level 1) are nested within schools (level 2). Each student has an outcome score (e.g., test score), and each school has a group-level variable (e.g., school resources)."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"StudentID"}]},{"type":"text","value":": A unique identifier for each student."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"SchoolID"}]},{"type":"text","value":": A unique identifier for each school."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Score"}]},{"type":"text","value":": The outcome variable (e.g., test score)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"SchoolResources"}]},{"type":"text","value":": A group-level predictor for schools (e.g., resources)."}]}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Generate a simple dataset\nset.seed(123)\ndata <- data.frame(\n  StudentID = 1:100,\n  SchoolID = rep(1:10, each = 10),\n  Score = rnorm(100, mean = 75, sd = 10),\n  SchoolResources = rep(rnorm(10, mean = 50, sd = 5), each = 10)\n)\n\n# View the first few rows\nhead(data)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Generate a simple dataset\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"set.seed(123)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"data <- data.frame(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  StudentID = 1:100,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  SchoolID = rep(1:10, each = 10),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  Score = rnorm(100, mean = 75, sd = 10),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  SchoolResources = rep(rnorm(10, mean = 50, sd = 5), each = 10)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# View the first few rows\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"head(data)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"fitting-a-two-level-hierarchical-linear-model-in-r"},"children":[{"type":"text","value":"Fitting a Two-Level Hierarchical Linear Model in R"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lme4"}]},{"type":"text","value":" package to fit a two-level hierarchical model, where we predict student test scores based on both individual- and school-level factors."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Load necessary library\nif (!require(lme4)) install.packages(\"lme4\")\nlibrary(lme4)\n\n# Fit a two-level hierarchical model\nhlm_model <- lmer(Score ~ SchoolResources + (1 | SchoolID), data = data)\n\n# Display the model summary\nsummary(hlm_model)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Load necessary library\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"if (!require(lme4)) install.packages(\"lme4\")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"library(lme4)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Fit a two-level hierarchical model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hlm_model <- lmer(Score ~ SchoolResources + (1 | SchoolID), data = data)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Display the model summary\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"summary(hlm_model)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"model-interpretation"},"children":[{"type":"text","value":"Model Interpretation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the output, the fixed effects estimate the effect of school resources on student test scores, while the random effects estimate the variation between schools. The random intercepts capture differences in average test scores across schools."}]},{"type":"element","tag":"h4","props":{"id":"adding-more-complexity-random-slopes"},"children":[{"type":"text","value":"Adding More Complexity: Random Slopes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can extend the model by allowing the effect of school resources to vary across schools, adding random slopes to the model."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Fit a random slope model\nhlm_model_slopes <- lmer(Score ~ SchoolResources + (SchoolResources | SchoolID), data = data)\n\n# Display the model summary\nsummary(hlm_model_slopes)\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Fit a random slope model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"hlm_model_slopes <- lmer(Score ~ SchoolResources + (SchoolResources | SchoolID), data = data)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Display the model summary\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"summary(hlm_model_slopes)\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"visualizing-results"},"children":[{"type":"text","value":"Visualizing Results"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Plotting the random intercepts and slopes helps visualize the variation across groups (schools)."}]},{"type":"element","tag":"pre","props":{"className":"language-r shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"# Load ggplot2 for visualization\nlibrary(ggplot2)\n\n# Create a random intercepts plot\nggplot(data, aes(x = SchoolResources, y = Score, color = factor(SchoolID))) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    title = \"Random Intercepts and Slopes by School\",\n    x = \"School Resources\",\n    y = \"Test Score\",\n    color = \"School ID\"\n  )\n","language":"r","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Load ggplot2 for visualization\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"library(ggplot2)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# Create a random intercepts plot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ggplot(data, aes(x = SchoolResources, y = Score, color = factor(SchoolID))) +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  geom_point() +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  geom_smooth(method = \"lm\", se = FALSE) +\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  labs(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    title = \"Random Intercepts and Slopes by School\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    x = \"School Resources\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    y = \"Test Score\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    color = \"School ID\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"  )\n"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"exercises"},"children":[{"type":"text","value":"üõù Exercises"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Try modifying the model by adding student-level predictors (e.g., student socioeconomic status) or experimenting with different correlation structures to see how they influence the results."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"final-thoughts"},"children":[{"type":"text","value":"üí≠ Final Thoughts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You‚Äôve now learned the basics of hierarchical linear modeling, a powerful technique for analyzing nested data. HLM allows you to account for both individual- and group-level effects, providing a more nuanced understanding of your data."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"further-resources-for-learning-about-hierarchical-linear-modeling"},"children":[{"type":"text","value":"üîó Further Resources for Learning About Hierarchical Linear Modeling"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Books"}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"\"Multilevel and Longitudinal Modeling with IBM SPSS\""}]},{"type":"text","value":" by Heck, Thomas, and Tabata: A great introduction to multilevel modeling."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"\"Hierarchical Linear Models\""}]},{"type":"text","value":" by Raudenbush and Bryk: A classic text on HLM, covering both theory and applications."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Online Tutorials"}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stats.oarc.ucla.edu/r/dae/multilevel-models/","rel":["nofollow"]},"children":[{"type":"text","value":"HLM in R by IDRE at UCLA"}]},{"type":"text","value":": A step-by-step guide to fitting multilevel models in R."}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"Ô∏è-foundations","depth":3,"text":"üèóÔ∏è Foundations"},{"id":"when-to-use-hierarchical-linear-modeling","depth":3,"text":"ü§î When to Use Hierarchical Linear Modeling?"},{"id":"getting-started-with-hierarchical-linear-modeling","depth":3,"text":"üöÄ Getting Started with Hierarchical Linear Modeling"},{"id":"hands-on-example","depth":3,"text":"üë©‚Äçüíª Hands-On Example"},{"id":"exercises","depth":3,"text":"üõù Exercises"},{"id":"final-thoughts","depth":3,"text":"üí≠ Final Thoughts"},{"id":"further-resources-for-learning-about-hierarchical-linear-modeling","depth":3,"text":"üîó Further Resources for Learning About Hierarchical Linear Modeling"}]}},"_type":"markdown","_id":"content:2.tutorials:1.longitudinal-analyses-models:3.mixed-effects-and-multilevel:hierarchical_linear_modeling_tutorial.qmd","_source":"content","_file":"2.tutorials/1.longitudinal-analyses-models/3.mixed-effects-and-multilevel/hierarchical_linear_modeling_tutorial.qmd","_extension":"qmd"},"hash":"XLWIgxjiQn"}